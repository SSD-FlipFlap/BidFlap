<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" type="text/css" th:href="@{/resources/css/main/main.css}">
    <title>메인페이지-로그인</title>
    <script th:inline="javascript">
        document.addEventListener('DOMContentLoaded', function() {
            let loginSuccess = [[${loginSuccess}]];
            if (loginSuccess) {
                const memberNickname = [[${session.loggedInMember}]];
                alert(memberNickname + '님, 로그인 되었습니다.');
            }
        });
    </script>
</head>
<body>
<div th:include="thyme/HeaderWithCategory"></div><br/>

<div th:if="${logoutSuccess}">
    <script th:inline="javascript">
        alert("로그아웃 되었습니다.");
    </script>
</div>

<div class="main-container">
    <div class="main-frame">
        <img th:src="@{/resources/img/main_frame.png}" alt="Product 1">
    </div>
    <br/><br/>
    <div class="search-container">
        <form action="/product/list" method="get">
            <img th:src="@{/resources/img/searchbar.png}" alt="searchbar">
            <input type="text" name="keyword" class="" placeholder="원하는 제품을 검색해보세요">
            <button type="submit">검색</button>
        </form>
    </div>

    <!-- 로그인 o -->
    <div th:if="${session.loggedInMember != null}">
        <div class="recommendations-container" th:text="${session.loggedInMember + '님을 위한 추천 상품'}"></div>
        <div class="recommendations-category">카메라 | 핸드폰</div>
    </div>

    <!-- 로그인 x -->
    <div th:if="${session.loggedInMember == null}">
        <div class="recommendations-container">요즘 뜨는 상품</div>
    </div>

    <div class="product_images">
        <div class="image_row">
            <div class="image_container" th:each="product : ${productList}">
                <div class="image_and_heart_container">
                    <div class="image_placeholder"></div>
                    <a th:href="@{/product/view(id=${product.id})}">
                        <img th:if="${#lists.size(product.productImageList) > 0}"
                             th:src="${product.productImageList.get(0).url}"
                             class="product_img" alt="Product Image">
                        <img th:if="${#lists.size(product.productImageList) == 0}"
                             th:src="@{/resources/img/product_example.png}"
                             class="product_img" alt="Default Image">
                    </a>
                    <img th:src="@{/resources/img/heart.png}" alt="heart 1" class="heart_icon">
                    <div class="heart"></div>
                </div>
                <a th:text="${product.title}" th:href="@{/product/view(id=${product.id})}">판매글 제목</a>
                <a th:text="${product.price} + '원'" th:href="@{/product/view(id=${product.id})}">가격</a>
            </div>
        </div>
    </div>


    <!-- 오른쪽 빈 공간 -->
    <div class="empty_space"></div>
    <!-- 선택 창 -->
    <div class="selection-box">

        <a href=""> 내 경매</a><br/><br/><br/>
        <a href=""> 좋아요한 목록</a><br/><br/><br/>
        <a href=""> AS 서비스</a> <br/><br/><br/>
        <a href="/product/register"> 판매글 등록</a><br/><br/><br/>
    </div>
</div>

</body>
</html>
